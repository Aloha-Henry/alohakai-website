<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Stories - Alohakia</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gradient-cyan: #67E8F9;
            --gradient-pink: #FB7185;
            --bg-dark: #0a0a0a;
            --bg-card: rgba(20, 20, 20, 0.6);
            --border-subtle: rgba(255, 255, 255, 0.06);
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #000;
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        /* Navigation - Same as homepage */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mobile-menu {
            display: none;
        }

        .mobile-menu.active {
            display: block;
        }

        @media (max-width: 768px) {
            .desktop-nav {
                display: none;
            }
        }

        /* Glass morphism - Same as homepage */
        .glass-morphism {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        /* Audio Cards - Updated to match homepage style */
        .audio-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            height: 450px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        .audio-card:hover {
            transform: translateY(-4px);
            border-color: rgba(103, 232, 249, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3),
                        0 10px 20px rgba(103, 232, 249, 0.05);
        }

        .audio-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--gradient-cyan), var(--gradient-pink));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .audio-card:hover::before {
            opacity: 1;
        }

        .play-button {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #67E8F9 0%, #FB7185 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 25px rgba(103, 232, 249, 0.4);
        }

        .play-area {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(103, 232, 249, 0.05) 0%, rgba(251, 113, 133, 0.05) 100%);
            border: 1px solid rgba(103, 232, 249, 0.1);
            border-radius: 12px;
            margin: 1rem 0;
            position: relative;
        }

        /* Filter pills - Same as homepage */
        .tag-pill {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
        }
        
        .tag-pill:hover {
            border-color: rgba(103, 232, 249, 0.3);
            color: rgba(103, 232, 249, 0.9);
            background: rgba(103, 232, 249, 0.05);
            transform: translateY(-1px);
        }

        .tag-pill.active {
            background: linear-gradient(135deg, rgba(103, 232, 249, 0.1), rgba(251, 113, 133, 0.1));
            border-color: rgba(103, 232, 249, 0.3);
            color: var(--text-primary);
        }

        /* Badge System - Same as homepage */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            border: 1px solid;
        }

        .badge-gray {
            background: rgba(148, 163, 184, 0.08);
            border-color: rgba(148, 163, 184, 0.15);
            color: var(--text-muted);
        }

        .badge-cyan {
            background: rgba(103, 232, 249, 0.08);
            border-color: rgba(103, 232, 249, 0.15);
            color: var(--gradient-cyan);
        }

        .duration-badge {
            background: rgba(103, 232, 249, 0.1);
            border: 1px solid rgba(103, 232, 249, 0.2);
            color: var(--gradient-cyan);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .narrator-badge {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Search input */
        .search-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
            color: var(--text-primary);
        }
        
        .search-input:focus {
            outline: none;
            border-color: rgba(103, 232, 249, 0.3);
            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 0 0 3px rgba(103, 232, 249, 0.05);
        }
        
        .search-input::placeholder {
            color: var(--text-muted);
        }

        /* Header button */
        .get-coconuts-btn {
            background: linear-gradient(135deg, #67E8F9, #FB7185);
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            color: white;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .get-coconuts-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Audio tag styling */
        .audio-tag {
            background: rgba(103, 232, 249, 0.08);
            border: 1px solid rgba(103, 232, 249, 0.15);
            color: var(--gradient-cyan);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <!-- Navigation Header - Same as homepage -->
    <nav class="nav-header">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <a href="/" class="text-2xl font-light">
                    <span style="background: linear-gradient(135deg, #67E8F9 0%, #FB7185 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                        Alohakia
                    </span>
                </a>
                
                <!-- Desktop Navigation -->
                <div class="desktop-nav hidden md:flex items-center gap-8">
                    <!-- Section Links -->
                    <div class="flex gap-6">
                        <a href="/deals" class="text-gray-400 hover:text-white transition-colors text-sm">Deals</a>
                        <a href="/adventures" class="text-gray-400 hover:text-white transition-colors text-sm">Adventures</a>
                        <a href="/audio" class="text-cyan-400 font-medium text-sm">Audio</a>
                        <a href="/shop" class="text-gray-400 hover:text-white transition-colors text-sm">Shop</a>
                    </div>
                    
                    <!-- Divider -->
                    <div class="h-4 w-px bg-gray-700"></div>
                    
                    <!-- Page Links -->
                    <div class="flex items-center gap-6">
                        <a href="/about" class="text-gray-400 hover:text-white transition-colors text-sm">About</a>
                        <a href="/contact" class="text-gray-400 hover:text-white transition-colors text-sm">Contact</a>
                        <a href="/signup" class="get-coconuts-btn">Get Coconuts</a>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <button class="md:hidden text-white" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <!-- Mobile menu -->
            <div id="mobileMenu" class="mobile-menu mt-4">
                <a href="/deals" class="block py-2 text-gray-400 hover:text-white transition-colors">Deals</a>
                <a href="/adventures" class="block py-2 text-gray-400 hover:text-white transition-colors">Adventures</a>
                <a href="/audio" class="block py-2 text-cyan-400 font-medium">Audio</a>
                <a href="/shop" class="block py-2 text-gray-400 hover:text-white transition-colors">Shop</a>
                <div class="border-t border-gray-700 my-3"></div>
                <a href="/about" class="block py-2 text-gray-400 hover:text-white transition-colors">About</a>
                <a href="/contact" class="block py-2 text-gray-400 hover:text-white transition-colors">Contact</a>
                <a href="/signup" class="block py-2 text-cyan-400 hover:text-cyan-300 transition-colors font-medium">Get Coconuts</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="pt-32 pb-16">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-5xl md:text-6xl font-light mb-6">
                <span style="background: linear-gradient(135deg, #67E8F9 0%, #FB7185 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" class="font-medium">
                    Audio Stories
                </span>
            </h1>
            <p class="text-xl font-light max-w-2xl mx-auto" style="color: var(--text-secondary);">
                Deep dives into Kauai's nature, history, and culture. Listen anywhere, learn from locals.
            </p>
        </div>
    </section>

    <!-- Search & Filters -->
    <div class="pb-8">
        <div class="container mx-auto px-6 mb-12">
            <div class="max-w-4xl mx-auto glass-morphism rounded-2xl p-6">
                <div class="flex flex-col gap-4">
                    <!-- Search Input -->
                    <div class="flex-1">
                        <input 
                            type="text" 
                            placeholder="Search audio stories..." 
                            class="w-full search-input rounded-xl px-6 py-4 text-base font-light"
                            id="audioSearch"
                            oninput="filterAudio()"
                        >
                    </div>
                    
                    <!-- Category Filter Buttons -->
                    <div class="flex gap-3 flex-wrap justify-center">
                        <button class="tag-pill active" data-filter="all">All</button>
                        <button class="tag-pill" data-filter="nature">Nature</button>
                        <button class="tag-pill" data-filter="history">History</button>
                        <button class="tag-pill" data-filter="culture">Culture</button>
                        <button class="tag-pill" data-filter="short">Short Listen</button>
                    </div>
                    
                    <!-- Duration Filter Pills -->
                    <div class="flex gap-3 flex-wrap justify-center">
                        <button class="tag-pill active" data-duration="all">All Lengths</button>
                        <button class="tag-pill" data-duration="short">Under 5 min</button>
                        <button class="tag-pill" data-duration="medium">5-10 min</button>
                        <button class="tag-pill" data-duration="long">10+ min</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Grid -->
    <section class="pb-20">
        <div class="container mx-auto px-6">
            <div class="audio-grid-container">
                <div id="audioGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Audio stories will be loaded dynamically -->
                </div>
                
                <!-- No results message -->
                <div id="noResults" class="text-center py-12 hidden">
                    <div class="text-4xl mb-4">ðŸŽ§</div>
                    <h3 class="text-xl font-medium mb-2" style="color: var(--text-primary);">No audio stories found</h3>
                    <p style="color: var(--text-secondary);">Try adjusting your search or filters</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer - Same as homepage -->
    <footer class="py-16 border-t border-gray-900">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Logo & Tagline -->
                <div class="md:col-span-1">
                    <div class="mb-4">
                        <span style="background: linear-gradient(135deg, #67E8F9 0%, #FB7185 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" class="text-2xl font-light">
                            Alohakia
                        </span>
                    </div>
                    <p class="text-sm" style="color: var(--text-muted);">
                        Your AI-powered local guide to the Garden Isle
                    </p>
                </div>

                <!-- Company -->
                <div>
                    <h4 class="text-sm font-semibold mb-4" style="color: var(--text-primary);">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="/about" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">About Us</a></li>
                        <li><a href="/contact" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Contact</a></li>
                        <li><a href="/careers" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Careers</a></li>
                        <li><a href="/blog" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Blog</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h4 class="text-sm font-semibold mb-4" style="color: var(--text-primary);">Support</h4>
                    <ul class="space-y-2">
                        <li><a href="/help" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Help Center</a></li>
                        <li><a href="/faq" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">FAQ</a></li>
                        <li><a href="/privacy" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Privacy Policy</a></li>
                        <li><a href="/terms" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Terms of Service</a></li>
                    </ul>
                </div>

                <!-- Connect -->
                <div>
                    <h4 class="text-sm font-semibold mb-4" style="color: var(--text-primary);">Connect</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Instagram</a></li>
                        <li><a href="#" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Twitter</a></li>
                        <li><a href="#" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">YouTube</a></li>
                        <li><a href="/newsletter" class="text-sm hover:text-white transition-colors" style="color: var(--text-muted);">Newsletter</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-12 pt-8 text-center">
                <p class="text-sm" style="color: var(--text-muted);">
                    Â© 2025 Alohakia. Made with aloha in Kauai.
                </p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Audio stories data - Same amazing content, updated styling
        const audioData = [
            {
                id: 1,
                title: "Why Humpback Whales Choose Kauai Waters",
                description: "Discover the scientific and cultural reasons these magnificent creatures travel 3,000 miles to birth their calves in Kauai's warm, shallow waters. Learn about their migration patterns, feeding habits, and the ancient Hawaiian beliefs surrounding these gentle giants.",
                narrator: "Kai",
                duration: 3,
                category: "nature",
                tags: ["Marine Life", "Science", "Migration", "Hawaiian Culture"],
                audioUrl: "https://redgthlqsfquqmqtnrfx.supabase.co/storage/v1/object/public/Audio%20Guides/ElevenLabs_Kauai_Humpback_Brittany.mp3",
                pageUrl: "/audio/humpback-whales-kauai",
                transcript: "Available"
            },
            {
                id: 2,
                title: "The History of Hanalei Bay",
                description: "From ancient taro fields to royal visits, explore the rich cultural tapestry of Kauai's most iconic bay. Hear stories of the families who shaped this land, the missionaries who arrived, and the Hollywood stars who discovered its magic.",
                narrator: "Kai",
                duration: 4,
                category: "history",
                tags: ["Ancient Hawaii", "Royalty", "Taro Fields", "Hollywood"],
                audioUrl: "https://redgthlqsfquqmqtnrfx.supabase.co/storage/v1/object/public/Audio%20Guides/Hanalei.mp3",
                pageUrl: "/audio/hanalei-bay-history",
                transcript: "Available"
            },
            {
                id: 3,
                title: "The Last Independent Ruler",
                description: "The fascinating story of King Kaumuali'i, who navigated between preserving Kauai's independence and the changing tides of Hawaiian politics. Learn about his strategic alliances, his exile to Oahu, and his lasting impact on Kauai's identity.",
                narrator: "Kai",
                duration: 4,
                category: "culture",
                tags: ["Hawaiian Royalty", "Politics", "Independence", "Legacy"],
                audioUrl: "https://redgthlqsfquqmqtnrfx.supabase.co/storage/v1/object/public/Audio%20Guides/ElevenLabs_First_King.mp3",
                pageUrl: "/audio/king-kaumuali-story",
                transcript: "Available"
            }
        ];

        function getDurationCategory(duration) {
            if (duration < 5) return 'short';
            if (duration <= 10) return 'medium';
            return 'long';
        }

        function renderAudio(stories = audioData) {
            const grid = document.getElementById('audioGrid');
            const noResults = document.getElementById('noResults');
            
            if (stories.length === 0) {
                grid.innerHTML = '';
                noResults.classList.remove('hidden');
                return;
            }
            
            noResults.classList.add('hidden');
            grid.innerHTML = '';

            stories.forEach(story => {
                const audioCard = document.createElement('div');
                audioCard.className = 'audio-card';
                audioCard.dataset.category = story.category;
                audioCard.dataset.duration = getDurationCategory(story.duration);
                
                audioCard.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <div class="narrator-badge">
                            Narrated by ${story.narrator}
                        </div>
                        <div class="duration-badge">
                            ðŸŽ§ ${story.duration} min
                        </div>
                    </div>
                    
                    <!-- Audio Preview Area -->
                    <div class="play-area">
                        <div class="play-button" onclick="playPreview('${story.id}', this)" data-audio-url="${story.audioUrl}">
                            â–¶
                        </div>
                    </div>
                    
                    <h3 class="text-xl font-semibold mb-3 leading-tight" style="color: var(--text-primary);">${story.title}</h3>
                    <p class="text-sm mb-4 leading-relaxed flex-1" style="color: var(--text-secondary);">
                        ${story.description}
                    </p>
                    
                    <!-- Tags -->
                    <div class="flex flex-wrap gap-2 mt-auto">
                        ${story.tags.slice(0, 3).map(tag => `<span class="audio-tag">${tag}</span>`).join('')}
                    </div>
                `;
                
                grid.appendChild(audioCard);
            });
        }

        let currentlyPlaying = null;
        let currentButton = null;

        function playPreview(storyId, button) {
            const audioUrl = button.dataset.audioUrl;
            
            // If clicking the same button that's currently playing, pause it
            if (currentButton === button && currentlyPlaying && !currentlyPlaying.paused) {
                currentlyPlaying.pause();
                currentlyPlaying.currentTime = 0;
                button.textContent = 'â–¶';
                currentlyPlaying = null;
                currentButton = null;
                return;
            }
            
            // Stop any currently playing audio
            if (currentlyPlaying) {
                currentlyPlaying.pause();
                currentlyPlaying.currentTime = 0;
                if (currentButton) currentButton.textContent = 'â–¶';
            }
            
            // Create new audio element
            const audio = new Audio(audioUrl);
            
            audio.play().then(() => {
                button.textContent = 'â¸';
                currentlyPlaying = audio;
                currentButton = button;
                
                // Auto-stop after 30 seconds
                setTimeout(() => {
                    if (currentlyPlaying === audio && !audio.paused) {
                        audio.pause();
                        audio.currentTime = 0;
                        button.textContent = 'â–¶';
                        currentlyPlaying = null;
                        currentButton = null;
                    }
                }, 30000);
                
                audio.onended = () => {
                    button.textContent = 'â–¶';
                    currentlyPlaying = null;
                    currentButton = null;
                };
                
            }).catch(error => {
                console.error('Error playing audio:', error);
                button.textContent = 'âŒ';
                setTimeout(() => {
                    button.textContent = 'â–¶';
                }, 2000);
            });
        }

        function goToStory(pageUrl) {
            // Navigate to individual story page
            alert(`Going to ${pageUrl} - Full audio player + transcript`);
            // window.location.href = pageUrl;
        }

        function filterAudio() {
            const searchTerm = document.getElementById('audioSearch').value.toLowerCase();
            const activeFilter = document.querySelector('.tag-pill.active[data-filter]').dataset.filter;
            const activeDuration = document.querySelector('.tag-pill.active[data-duration]').dataset.duration;
            
            const filteredStories = audioData.filter(story => {
                const matchesSearch = story.title.toLowerCase().includes(searchTerm) || 
                                    story.description.toLowerCase().includes(searchTerm) ||
                                    story.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                const matchesFilter = activeFilter === 'all' || story.category === activeFilter;
                const matchesDuration = activeDuration === 'all' || getDurationCategory(story.duration) === activeDuration;
                
                return matchesSearch && matchesFilter && matchesDuration;
            });
            
            renderAudio(filteredStories);
        }

        // Filter button functionality
        document.querySelectorAll('.tag-pill[data-filter]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tag-pill[data-filter]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                filterAudio();
            });
        });

        // Duration filter functionality
        document.querySelectorAll('.tag-pill[data-duration]').forEach(pill => {
            pill.addEventListener('click', () => {
                document.querySelectorAll('.tag-pill[data-duration]').forEach(p => p.classList.remove('active'));
                pill.classList.add('active');
                filterAudio();
            });
        });

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('active');
        }

        // Initialize audio on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderAudio();
        });

        // Smooth scrolling for anchor links
        document.addEventListener('click', function(e) {
            if (e.target.matches('a[href^="#"]')) {
                e.preventDefault();
                const target = document.querySelector(e.target.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    document.getElementById('mobileMenu').classList.remove('active');
                }
            }
        });
    </script>
</body>
</html>